<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤ ‡§¨‡§ø‡•õ‡§®‡•á‡§∏ ‡§µ‡§ø‡§∂ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ú‡•á‡§®‡§∞‡•á‡§ü‡§∞</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Cropper.js ‡§≤‡§æ‡§á‡§¨‡•ç‡§∞‡•á‡§∞‡•Ä ‡§ú‡•ã‡§°‡§º‡•Ä ‡§ó‡§à -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Tiro+Devanagari+Hindi:ital@1&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #f0f8ff;
            --text-dark: #333;
            --text-light: #555;
            --bg-color: #eef2f7;
            --white: #ffffff;
            --border-color: #ddd;
            --input-bg: #ffffff;
        }

        body.dark-mode {
            --primary-color: #4cabff;
            --secondary-color: #2c3e50;
            --text-dark: #ecf0f1;
            --text-light: #bdc3c7;
            --bg-color: #1c2833;
            --white: #283747;
            --border-color: #444;
            --input-bg: #34495e;
        }

        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            background-color: var(--bg-color);
            color: var(--text-dark);
            margin: 0;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 500px;
            width: 100%;
            background-color: var(--white);
            padding: 20px 30px 30px 30px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s;
        }
        
        .settings-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .lang-selector button {
            padding: 5px 10px;
            font-size: 0.9em;
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-light);
            cursor: pointer;
            border-radius: 6px;
            margin: 0 4px;
        }
        .lang-selector button.active {
            background-color: var(--primary-color);
            color: #fff;
            border-color: var(--primary-color);
            font-weight: bold;
        }
        
        .dark-mode-toggle { display: flex; align-items: center; gap: 8px; font-size: 0.9em; color: var(--text-light); }
        .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 24px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary-color); }
        input:checked + .slider:before { transform: translateX(20px); }


        h1, h2 { color: var(--primary-color); }
        h1 { font-size: 1.8em; margin-bottom: 20px; }
        h2 { font-size: 1.5em; margin-bottom: 15px; }

        .input-form { display: flex; flex-direction: column; gap: 15px; }
        .input-form input {
            width: 95%;
            padding: 12px;
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-dark);
            border-radius: 8px;
            font-size: 1em;
        }
        .input-form label {
            background-color: var(--secondary-color);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px dashed var(--primary-color);
            color: var(--text-dark);
        }
        .input-form input[type="file"] { display: none; }

        button {
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        #quotes-selection-section { margin-top: 20px; }
        .quote-list {
            list-style: none;
            padding: 0;
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 8px;
        }
        .quote-item {
            padding: 12px;
            margin-bottom: 8px;
            background-color: var(--secondary-color);
            color: var(--text-dark);
            border-radius: 8px;
            cursor: pointer;
            border-left: 4px solid var(--primary-color);
            text-align: left;
        }
        .quote-item.selected {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        .business-card {
            margin-top: 25px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            background-size: cover;
            background-position: center;
            overflow: hidden;
            color: #ffffff;
            height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
        }

        .business-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5); 
            z-index: 1;
        }
        
        .business-card.theme-morning::before { background: linear-gradient(135deg, rgba(246, 211, 101, 0.6), rgba(253, 160, 133, 0.6)); }
        .business-card.theme-afternoon::before { background: linear-gradient(135deg, rgba(161, 196, 253, 0.6), rgba(194, 233, 251, 0.6)); }
        .business-card.theme-evening::before { background: linear-gradient(135deg, rgba(255, 126, 95, 0.7), rgba(254, 180, 123, 0.7)); }
        .business-card.theme-night::before { background: linear-gradient(135deg, rgba(44, 62, 80, 0.8), rgba(75, 108, 183, 0.8)); }

        .card-body, .card-footer {
            position: relative;
            z-index: 2;
            text-shadow: 1px 1px 6px rgba(0,0,0,0.7);
        }

        .card-body {
            flex-grow: 1;
            display: flex;
            flex-direction: column; 
            align-items: center;
            justify-content: center;
            padding: 10px 0;
        }

        #greetingDisplay {
            font-family: 'Poppins', sans-serif;
            font-size: 1.9em;
            font-weight: 700;
            margin-bottom: 15px;
            color: #fff;
        }

        #quoteDisplay {
            font-family: 'Tiro Devanagari Hindi', serif;
            font-style: italic;
            font-size: 1.6em;
            line-height: 1.5;
            max-width: 95%;
            text-align: center;
            margin-top: 0;
        }
         #quoteDisplay::before, #quoteDisplay::after { display: none; }

        .card-footer {
            display: flex;
            align-items: center;
            gap: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.4);
        }

        #userImagePreview {
            width: 75px;
            height: 75px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.9);
            flex-shrink: 0;
        }
        
        .user-details { text-align: left; }
        #userNameDisplay { font-size: 1.5em; font-weight: 700; margin: 0; }
        #userContactDisplay, #userAddressDisplay { font-size: 0.9em; margin: 4px 0 0 0; opacity: 0.9; }
        .share-button { background-color: #25D366; font-size: 1.1em; margin-top: 20px; }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: var(--white);
            padding: 20px;
            border-radius: 12px;
            width: 90%;
            max-width: 450px;
            text-align: center;
        }
        .modal-content h2 { margin-top: 0; }
        #image-crop-container {
            width: 100%;
            height: 300px;
            margin-bottom: 15px;
        }
        #imageToCrop {
            max-width: 100%;
            display: block;
        }

        /* ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§µ‡•ç‡§Ø‡•Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§ß‡§æ‡§∞ */
        @media (max-width: 420px) {
            .business-card {
                padding: 15px;
            }
            #greetingDisplay { font-size: 1.7em; }
            #quoteDisplay { font-size: 1.4em; }
            #userImagePreview { width: 65px; height: 65px; }
            #userNameDisplay { font-size: 1.4em; }
            #userContactDisplay, #userAddressDisplay { 
                font-size: 0.85em; 
                word-break: break-all; /* ‡§≤‡§Æ‡•ç‡§¨‡•á ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡•ã ‡§ü‡•Ç‡§ü‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à */
            }
            .card-footer { gap: 12px; }
        }

    </style>
    <!-- ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§ï‡•ã‡§° 1: ‡§Ø‡§π‡§æ‡§Å ‡§∏‡•á ‡§π‡§ü‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à -->
</head>
<body>

    <div class="container">
        
        <div class="settings-bar">
            <div class="lang-selector">
                <button id="lang-hi" class="active" onclick="setLanguage('hi')">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
                <button id="lang-en" onclick="setLanguage('en')">English</button>
            </div>
            <div class="dark-mode-toggle">
                <span id="darkModeLabel">‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°</span>
                <label class="switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        
        <!-- ‡§ö‡§∞‡§£ 1: ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§´‡•â‡§∞‡•ç‡§Æ -->
        <div id="input-section">
            <h1 id="mainHeading">‡§Ö‡§™‡§®‡§æ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§è </h1>
            <div class="input-form">
                <input type="text" id="userName" placeholder="‡§Ö‡§™‡§®‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç">
                <input type="tel" id="userContact" placeholder="‡§Ö‡§™‡§®‡§æ ‡§ï‡§æ‡§Ç‡§ü‡•á‡§ï‡•ç‡§ü ‡§®‡§Ç‡§¨‡§∞ ‡§≤‡§ø‡§ñ‡•á‡§Ç (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)">
                <input type="text" id="userAddress" placeholder="‡§Ö‡§™‡§®‡§æ ‡§™‡§§‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)">
                
                <label for="userPhoto" id="photoLabel">üñºÔ∏è ‡§Ö‡§™‡§®‡•Ä ‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§´‡•ã‡§ü‡•ã ‡§ö‡•Å‡§®‡•á‡§Ç</label>
                <input type="file" id="userPhoto" accept="image/*">
                
                <!-- ‡§®‡§Ø‡§æ: ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡§æ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ -->
                <label for="userBackground" id="backgroundLabel">üñºÔ∏è ‡§Ö‡§™‡§®‡§æ ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§ö‡•Å‡§®‡•á‡§Ç</label>
                <input type="file" id="userBackground" accept="image/*">

                <button id="showQuotesBtn" onclick="showQuotes()">‡§ï‡•ã‡§ü‡•á‡§∂‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç</button>
            </div>
        </div>

        <!-- ‡§ö‡§∞‡§£ 2: ‡§ï‡•ã‡§ü‡•á‡§∂‡§® ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡§æ ‡§∏‡•á‡§ï‡•ç‡§∂‡§® -->
        <div id="quotes-selection-section" style="display:none;">
            <h2 id="timeBasedHeading">‡§è‡§ï ‡§ï‡•ã‡§ü‡•á‡§∂‡§® ‡§ö‡•Å‡§®‡•á‡§Ç:</h2>
            <div class="quote-list" id="quotesList"></div>
        </div>

        <!-- ‡§ö‡§∞‡§£ 3 & 4: ‡§™‡•ç‡§∞‡•Ä‡§µ‡•ç‡§Ø‡•Ç ‡§î‡§∞ ‡§∂‡•á‡§Ø‡§∞‡§ø‡§Ç‡§ó ‡§∏‡•á‡§ï‡•ç‡§∂‡§® -->
        <div id="wishSection" style="display:none;">

            <div class="business-card" id="captureArea">
                <div class="card-body">
                    <h2 id="greetingDisplay"></h2>
                    <p id="quoteDisplay"></p>
                </div>
                <div class="card-footer">
                    <img id="userImagePreview" src="" alt="User Photo">
                    <div class="user-details">
                        <h3 id="userNameDisplay"></h3>
                        <p id="userContactDisplay"></p>
                        <p id="userAddressDisplay"></p>
                    </div>
                </div>
            </div>
            <button class="share-button" id="shareBtn" onclick="shareWish(event)">üì§ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
            
        </div>
    </div>

    <!-- ‡§´‡•ã‡§ü‡•ã ‡§ï‡•ç‡§∞‡•â‡§™ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è Modal HTML -->
    <div id="cropModal" class="modal">
        <div class="modal-content">
            <h2 id="cropModalTitle">‡§Ö‡§™‡§®‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</h2>
            <div id="image-crop-container">
                <img id="imageToCrop" src="">
            </div>
            <button id="cropConfirmBtn">‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
        </div>
    </div>

    <script>
        // --- LANGUAGE & UI TEXT ---
        let currentLanguage = 'hi';
        const uiText = {
            hi: {
                pageTitle: "‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤ ‡§¨‡§ø‡•õ‡§®‡•á‡§∏ ‡§µ‡§ø‡§∂ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ú‡•á‡§®‡§∞‡•á‡§ü‡§∞",
                darkModeLabel: "‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°",
                mainHeading: "‡§Ö‡§™‡§®‡§æ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§è ",
                namePlaceholder: "‡§Ö‡§™‡§®‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç",
                contactPlaceholder: "‡§Ö‡§™‡§®‡§æ ‡§ï‡§æ‡§Ç‡§ü‡•á‡§ï‡•ç‡§ü ‡§®‡§Ç‡§¨‡§∞ ‡§≤‡§ø‡§ñ‡•á‡§Ç (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)",
                addressPlaceholder: "‡§Ö‡§™‡§®‡§æ ‡§™‡§§‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)",
                photoLabelDefault: "üñºÔ∏è ‡§Ö‡§™‡§®‡•Ä ‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§´‡•ã‡§ü‡•ã ‡§ö‡•Å‡§®‡•á‡§Ç",
                photoLabelSelected: "‚úÖ ‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§´‡•ã‡§ü‡•ã ‡§∏‡•á‡§ü ‡§π‡•ã ‡§ó‡§à!",
                backgroundLabelDefault: "üñºÔ∏è ‡§Ö‡§™‡§®‡§æ ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§ö‡•Å‡§®‡•á‡§Ç",
                backgroundLabelSelected: "‚úÖ ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡•á‡§ü ‡§π‡•ã ‡§ó‡§Ø‡§æ!",
                showQuotesBtn: "‡§ï‡•ã‡§ü‡•á‡§∂‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç",
                morningHeading: "üåû ‡§∏‡•Å‡§™‡•ç‡§∞‡§≠‡§æ‡§§ ‡§ï‡•ã‡§ü‡•á‡§∂‡§® ‡§ö‡•Å‡§®‡•á‡§Ç:",
                afternoonHeading: "‚òÄÔ∏è ‡§∂‡•Å‡§≠ ‡§¶‡•ã‡§™‡§π‡§∞ ‡§ï‡•ã‡§ü‡•á‡§∂‡§® ‡§ö‡•Å‡§®‡•á‡§Ç:",
                eveningHeading: "üåÜ ‡§∂‡•Å‡§≠ ‡§∏‡§Ç‡§ß‡•ç‡§Ø‡§æ ‡§ï‡•ã‡§ü‡•á‡§∂‡§® ‡§ö‡•Å‡§®‡•á‡§Ç:",
                nightHeading: "üåô ‡§∂‡•Å‡§≠ ‡§∞‡§æ‡§§‡•ç‡§∞‡§ø ‡§ï‡•ã‡§ü‡•á‡§∂‡§® ‡§ö‡•Å‡§®‡•á‡§Ç:",
                greetingMorning: "‡§∏‡•Å‡§™‡•ç‡§∞‡§≠‡§æ‡§§",
                greetingAfternoon: "‡§∂‡•Å‡§≠ ‡§¶‡•ã‡§™‡§π‡§∞",
                greetingEvening: "‡§∂‡•Å‡§≠ ‡§∏‡§Ç‡§ß‡•ç‡§Ø‡§æ",
                greetingNight: "‡§∂‡•Å‡§≠ ‡§∞‡§æ‡§§‡•ç‡§∞‡§ø",
                shareBtn: "üì§ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç",
                shareProcessing: "‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó...",
                shareMessage: " ‡§ï‡•Ä ‡§ì‡§∞ ‡§∏‡•á ‡§è‡§ï ‡§™‡•ç‡§Ø‡§æ‡§∞‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂! ‚ú®",
                createYourOwnMessage: "\n\n‡§Ü‡§™ ‡§≠‡•Ä ‡§ê‡§∏‡•á ‡§π‡•Ä ‡§Ö‡§™‡§®‡§æ ‡§¨‡§ø‡§ú‡§®‡•á‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§Æ‡§ø‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§≠‡•á‡§ú ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§π‡§æ‡§Å ‡§¨‡§®‡§æ‡§è‡§Å:",
                alertMessage: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§´‡•ã‡§ü‡•ã ‡§ú‡§º‡§∞‡•Ç‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç!",
                shareError: "‡§∂‡•á‡§Ø‡§∞‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§á‡§Æ‡•á‡§ú ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§",
                cropModalTitlePhoto: "‡§Ö‡§™‡§®‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç",
                cropModalTitleBackground: "‡§Ö‡§™‡§®‡§æ ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç",
                cropConfirmBtn: "‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç"
            },
            en: {
                pageTitle: "Professional Business Wish Card Generator",
                darkModeLabel: "Dark Mode",
                mainHeading: "Create Your Card",
                namePlaceholder: "Enter your full name",
                contactPlaceholder: "Enter your contact number (optional)",
                addressPlaceholder: "Enter your address (optional)",
                photoLabelDefault: "üñºÔ∏è Choose your profile photo",
                photoLabelSelected: "‚úÖ Profile photo set successfully!",
                backgroundLabelDefault: "üñºÔ∏è Choose your background",
                backgroundLabelSelected: "‚úÖ Background set successfully!",
                showQuotesBtn: "View Quotes",
                morningHeading: "üåû Select a Good Morning Quote:",
                afternoonHeading: "‚òÄÔ∏è Select a Good Afternoon Quote:",
                eveningHeading: "üåÜ Select a Good Evening Quote:",
                nightHeading: "üåô Select a Good Night Quote:",
                greetingMorning: "Good Morning",
                greetingAfternoon: "Good Afternoon",
                greetingEvening: "Good Evening",
                greetingNight: "Good Night",
                shareBtn: "üì§ Share",
                shareProcessing: "Processing...",
                shareMessage: " has sent a lovely message! ‚ú®",
                createYourOwnMessage: "\n\nYou can create your own business card and send it to your friends too. Create one here:",
                alertMessage: "Please enter your name and select a profile photo!",
                shareError: "Error in sharing. Please download the image and share manually.",
                cropModalTitlePhoto: "Set Your Photo",
                cropModalTitleBackground: "Set Your Background",
                cropConfirmBtn: "Set"
            }
        };

        const allQuotes = {
            hi: {
                morning: ["‡§â‡§†‡•ã, ‡§ú‡§æ‡§ó‡•ã ‡§î‡§∞ ‡§§‡§¨ ‡§§‡§ï ‡§Æ‡§§ ‡§∞‡•Å‡§ï‡•ã ‡§ú‡§¨ ‡§§‡§ï ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø ‡§® ‡§π‡•ã ‡§ú‡§æ‡§è‡•§", "‡§π‡§∞ ‡§∏‡•Å‡§¨‡§π ‡§è‡§ï ‡§®‡§à ‡§ï‡§π‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§π‡•à, ‡§Ö‡§™‡§®‡•Ä ‡§ï‡§π‡§æ‡§®‡•Ä ‡§ï‡•ã ‡§∂‡§æ‡§®‡§¶‡§æ‡§∞ ‡§¨‡§®‡§æ‡§è‡§Ç‡•§", "‡§è‡§ï ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§∏‡•ã‡§ö ‡§Ü‡§™‡§ï‡•á ‡§¶‡§ø‡§® ‡§ï‡•ã ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§ ‡§∏‡•Å‡§™‡•ç‡§∞‡§≠‡§æ‡§§!", "‡§Ü‡§ú ‡§ï‡§æ ‡§¶‡§ø‡§® ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§à ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§®‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ ‡§≤‡•á‡§ï‡§∞ ‡§Ü‡§è‡•§", "‡§Æ‡•Å‡§∏‡•ç‡§ï‡§æ‡§® ‡§∏‡•á ‡§¶‡§ø‡§® ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡§∞‡•á‡§Ç, ‡§ñ‡•Å‡§∂‡§ø‡§Ø‡§æ‡§Ç ‡§ñ‡•Å‡§¶-‡§¨-‡§ñ‡•Å‡§¶ ‡§Ü ‡§ú‡§æ‡§è‡§Ç‡§ó‡•Ä‡•§"],
                afternoon: ["‡§Ü‡§™ ‡§Ö‡§™‡§®‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§∏‡•á ‡§π‡•Ä ‡§Ü‡§ï‡§æ‡§∞ ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç, ‡§ú‡•à‡§∏‡§æ ‡§Ü‡§™ ‡§∏‡•ã‡§ö‡§§‡•á ‡§π‡•à‡§Ç, ‡§µ‡•à‡§∏‡§æ ‡§¨‡§® ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§", "‡§¶‡§ø‡§® ‡§ï‡§æ ‡§Ü‡§ß‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§¨‡•Ä‡§§ ‡§ö‡•Å‡§ï‡§æ ‡§π‡•à, ‡§¨‡§æ‡§ï‡•Ä ‡§π‡§ø‡§∏‡•ç‡§∏‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ä‡§∞‡•ç‡§ú‡§æ‡§µ‡§æ‡§® ‡§∞‡§π‡•á‡§Ç‡•§", "‡§è‡§ï ‡§õ‡•ã‡§ü‡§æ ‡§∏‡§æ ‡§¨‡•ç‡§∞‡•á‡§ï ‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§Ö‡§™‡§®‡•á ‡§ï‡§æ‡§Æ ‡§Æ‡•á‡§Ç ‡§ú‡•Å‡§ü ‡§ú‡§æ‡§è‡§Ç‡•§", "‡§¶‡•ã‡§™‡§π‡§∞ ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§Ü‡§™‡§ï‡•ã ‡§Ø‡§æ‡§¶ ‡§¶‡§ø‡§≤‡§æ‡§§‡§æ ‡§π‡•à ‡§ï‡§ø ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§Ö‡§≠‡•Ä ‡§¶‡•Ç‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§", "‡§ï‡§∞‡•ç‡§Æ ‡§ï‡§∞‡§§‡•á ‡§∞‡§π‡•ã, ‡§´‡§≤ ‡§ï‡•Ä ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§Æ‡§§ ‡§ï‡§∞‡•ã‡•§"],
                evening: ["‡§Ö‡§∏‡•ç‡§§ ‡§π‡•ã‡§§‡§æ ‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§π‡§Æ‡•á‡§Ç ‡§Ø‡§π ‡§∏‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à ‡§ï‡§ø ‡§Ö‡§Ç‡§§ ‡§≠‡•Ä ‡§ñ‡•Ç‡§¨‡§∏‡•Ç‡§∞‡§§ ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§", "‡§¶‡§ø‡§® ‡§≠‡§∞ ‡§ï‡•Ä ‡§•‡§ï‡§æ‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶, ‡§Ø‡§π ‡§∂‡§æ‡§Æ ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§ï‡•Ç‡§® ‡§≤‡•á‡§ï‡§∞ ‡§Ü‡§è‡•§", "‡§á‡§∏ ‡§ñ‡•Ç‡§¨‡§∏‡•Ç‡§∞‡§§ ‡§∂‡§æ‡§Æ ‡§ï‡§æ ‡§Ö‡§™‡§®‡•á ‡§™‡•ç‡§∞‡§ø‡§Ø‡§ú‡§®‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ü‡§®‡§Ç‡§¶ ‡§≤‡•á‡§Ç‡•§", "‡§∂‡§æ‡§Æ ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§π‡•à, ‡§Ö‡§™‡§®‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§∂‡§æ‡§Ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§î‡§∞ ‡§Ü‡§∞‡§æ‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ‡•§", "‡§π‡§∞ ‡§∂‡§æ‡§Æ ‡§è‡§ï ‡§®‡§à ‡§∏‡•Å‡§¨‡§π ‡§ï‡•Ä ‡§â‡§Æ‡•ç‡§Æ‡•Ä‡§¶ ‡§≤‡•á‡§ï‡§∞ ‡§Ü‡§§‡•Ä ‡§π‡•à‡•§"],
                night: ["‡§ö‡§ø‡§Ç‡§§‡§æ ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§ï‡§≤ ‡§ï‡•Ä ‡§™‡§∞‡•á‡§∂‡§æ‡§®‡§ø‡§Ø‡§æ‡§Ç ‡§¶‡•Ç‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§§‡•Ä‡§Ç, ‡§¨‡§≤‡•ç‡§ï‡§ø ‡§Ø‡§π ‡§Ü‡§ú ‡§ï‡•Ä ‡§∂‡§æ‡§Ç‡§§‡§ø ‡§ï‡•ã ‡§õ‡•Ä‡§® ‡§≤‡•á‡§§‡•Ä ‡§π‡•à‡•§", "‡§Ö‡§§‡•Ä‡§§ ‡§ï‡•ã ‡§≠‡•Ç‡§≤ ‡§ú‡§æ‡§ì, ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§Æ‡§§ ‡§ï‡§∞‡•ã, ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§ø‡§Ø‡•ã‡•§", "‡§è‡§ï ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§®‡•Ä‡§Ç‡§¶ ‡§Ü‡§™‡§ï‡•á ‡§∂‡§∞‡•Ä‡§∞ ‡§î‡§∞ ‡§Æ‡§® ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§á‡§≤‡§æ‡§ú ‡§π‡•à‡•§", "‡§∂‡•Å‡§≠ ‡§∞‡§æ‡§§‡•ç‡§∞‡§ø, ‡§Æ‡•Ä‡§†‡•á ‡§∏‡§™‡§®‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡•ã ‡§ú‡§æ‡§ì‡•§", "‡§ö‡§æ‡§Å‡§¶ ‡§ï‡•Ä ‡§∞‡•ã‡§∂‡§®‡•Ä ‡§Ü‡§™‡§ï‡•á ‡§∏‡§™‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§∞‡•ã‡§∂‡§® ‡§ï‡§∞‡•á‡•§"]
            },
            en: {
                morning: ["Arise, awake, and stop not till the goal is reached.", "Every morning is the start of a new story, make yours a great one.", "A positive thought can change your whole day. Good morning!", "May today bring you new opportunities and success.", "Start the day with a smile, and happiness will come to you."],
                afternoon: ["You are shaped by your thoughts; what you think, you become.", "Half the day is over; stay energetic for the rest.", "Take a short break and get back to your work with new energy.", "The afternoon reminds you that the goal is not far away.", "Keep doing your work, don't worry about the results."],
                evening: ["The setting sun teaches us that endings can be beautiful too.", "After a tiring day, may this evening bring you peace.", "Enjoy this beautiful evening with your loved ones.", "Evening is the time to calm your thoughts and relax.", "Every evening brings the hope of a new morning."],
                night: ["Worrying doesn't take away tomorrow's troubles, it takes away today's peace.", "Forget the past, don't worry about the future, live in the present.", "A good sleep is the best cure for a tired body and mind.", "Good night, sleep with sweet dreams.", "May the light of the moon illuminate your dreams."]
            }
        };
        
        // --- DOM ELEMENTS ---
        const pageTitle = document.getElementById('pageTitle');
        const darkModeLabel = document.getElementById('darkModeLabel');
        const mainHeading = document.getElementById('mainHeading');
        const userNameInput = document.getElementById('userName');
        const userContactInput = document.getElementById('userContact');
        const userAddressInput = document.getElementById('userAddress');
        const photoLabel = document.getElementById('photoLabel');
        const backgroundLabel = document.getElementById('backgroundLabel');
        const showQuotesBtn = document.getElementById('showQuotesBtn');
        const shareBtn = document.getElementById('shareBtn');
        const darkModeToggle = document.getElementById('darkModeToggle');
        
        const cropModal = document.getElementById('cropModal');
        const imageToCrop = document.getElementById('imageToCrop');
        const cropConfirmBtn = document.getElementById('cropConfirmBtn');
        const cropModalTitle = document.getElementById('cropModalTitle');
        const userPhotoInputEl = document.getElementById('userPhoto');
        const userBackgroundInputEl = document.getElementById('userBackground');

        let userInfo = {};
        let cropper = null;
        let currentCropType = null; // 'photo' or 'background'

        // --- FUNCTIONS ---
        
        // ‡§®‡§Ø‡§æ ‡§¨‡§¶‡§≤‡§æ‡§µ: ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        function loadAdScript() {
            if (document.getElementById('profit-ad-script')) return; // ‡§Ö‡§ó‡§∞ ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§π‡•à ‡§§‡•ã ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
            const script = document.createElement('script');
            script.id = 'profit-ad-script';
            script.type = 'text/javascript';
            script.src = '//pl27270386.profitableratecpm.com/75/25/24/752524902fd57d63f18f963c43e2d393.js';
            document.body.appendChild(script);
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.lang = lang;
            
            const t = uiText[lang];
            pageTitle.textContent = t.pageTitle;
            darkModeLabel.textContent = t.darkModeLabel;
            mainHeading.textContent = t.mainHeading;
            userNameInput.placeholder = t.namePlaceholder;
            userContactInput.placeholder = t.contactPlaceholder;
            userAddressInput.placeholder = t.addressPlaceholder;
            photoLabel.textContent = userInfo.photoDataUrl ? t.photoLabelSelected : t.photoLabelDefault;
            backgroundLabel.textContent = userInfo.backgroundDataUrl ? t.backgroundLabelSelected : t.backgroundLabelDefault;
            showQuotesBtn.textContent = t.showQuotesBtn;
            shareBtn.textContent = t.shareBtn;
            cropConfirmBtn.textContent = t.cropConfirmBtn;

            document.getElementById('lang-hi').classList.toggle('active', lang === 'hi');
            document.getElementById('lang-en').classList.toggle('active', lang === 'en');

            if (document.getElementById('quotes-selection-section').style.display === 'block') {
                showQuotes(true);
            }
        }
        
        function applyTheme(theme) {
            document.body.classList.toggle('dark-mode', theme === 'dark');
            darkModeToggle.checked = (theme === 'dark');
        }

        function handleFileSelect(e, cropType) {
            currentCropType = cropType;
            const files = e.target.files;
            if (files && files.length > 0) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    imageToCrop.src = event.target.result;
                    
                    const cropperOptions = {
                        viewMode: 1, background: false, responsive: true,
                        autoCropArea: 1, movable: true, zoomable: true,
                    };

                    if (cropType === 'photo') {
                        cropperOptions.aspectRatio = 1;
                        cropModalTitle.textContent = uiText[currentLanguage].cropModalTitlePhoto;
                    } else { // background
                        cropperOptions.aspectRatio = 500 / 350; // Card's approximate aspect ratio
                        cropModalTitle.textContent = uiText[currentLanguage].cropModalTitleBackground;
                    }

                    cropModal.style.display = 'flex';
                    if(cropper) cropper.destroy();
                    cropper = new Cropper(imageToCrop, cropperOptions);
                };
                reader.readAsDataURL(files[0]);
            }
            e.target.value = '';
        }

        userPhotoInputEl.addEventListener('change', (e) => handleFileSelect(e, 'photo'));
        userBackgroundInputEl.addEventListener('change', (e) => handleFileSelect(e, 'background'));

        cropConfirmBtn.addEventListener('click', function() {
            if (cropper) {
                const canvasOptions = { imageSmoothingQuality: 'high' };
                if(currentCropType === 'photo') {
                    canvasOptions.width = 256;
                    canvasOptions.height = 256;
                }
                const croppedCanvas = cropper.getCroppedCanvas(canvasOptions);
                
                if (currentCropType === 'photo') {
                    userInfo.photoDataUrl = croppedCanvas.toDataURL('image/png');
                    photoLabel.textContent = uiText[currentLanguage].photoLabelSelected;
                } else if (currentCropType === 'background') {
                    userInfo.backgroundDataUrl = croppedCanvas.toDataURL('image/jpeg', 0.9);
                    backgroundLabel.textContent = uiText[currentLanguage].backgroundLabelSelected;
                }

                cropModal.style.display = 'none';
                cropper.destroy();
            }
        });
        
        function showQuotes(isRefresh = false) {
            if (!isRefresh) {
                const userName = userNameInput.value;
                if (!userName || !userInfo.photoDataUrl) {
                    alert(uiText[currentLanguage].alertMessage);
                    return;
                }
                userInfo.name = userName;
                userInfo.contact = userContactInput.value;
                userInfo.address = userAddressInput.value;
                
                // ‡§®‡§Ø‡§æ ‡§¨‡§¶‡§≤‡§æ‡§µ: ‡§´‡•â‡§∞‡•ç‡§Æ ‡§≠‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç
                loadAdScript();
            }
            
            document.getElementById('input-section').style.display = 'none';

            const greetingDisplay = document.getElementById('greetingDisplay');
            const currentHour = new Date().getHours();
            let timeOfDay, timeBasedHeadingText, greetingText;
            const card = document.getElementById('captureArea');
            card.className = 'business-card'; 

            const t = uiText[currentLanguage];
            if (currentHour >= 5 && currentHour < 12) { timeOfDay = 'morning'; } 
            else if (currentHour >= 12 && currentHour < 17) { timeOfDay = 'afternoon'; }
            else if (currentHour >= 17 && currentHour < 21) { timeOfDay = 'evening'; }
            else { timeOfDay = 'night'; }
            
            timeBasedHeadingText = t[timeOfDay + 'Heading'];
            greetingText = t['greeting' + timeOfDay.charAt(0).toUpperCase() + timeOfDay.slice(1)];
            
            card.classList.add(`theme-${timeOfDay}`);
            greetingDisplay.innerText = greetingText;
            
            // ‡§∏‡•á‡§ü ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§°: ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§Ø‡§æ ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü
            if (userInfo.backgroundDataUrl) {
                card.style.backgroundImage = `url('${userInfo.backgroundDataUrl}')`;
            } else {
                card.style.backgroundImage = `url('${backgroundImages[timeOfDay]}')`;
            }

            const quotesToShow = allQuotes[currentLanguage][timeOfDay];
            const quotesListDiv = document.getElementById('quotesList');
            document.getElementById('timeBasedHeading').innerText = timeBasedHeadingText;
            quotesListDiv.innerHTML = '';
            quotesToShow.forEach(quote => {
                const item = document.createElement('div');
                item.className = 'quote-item';
                item.innerText = quote;
                item.onclick = () => selectQuote(item);
                quotesListDiv.appendChild(item);
            });
            document.getElementById('quotes-selection-section').style.display = 'block';
        }
        
        function selectQuote(selectedElement) {
            document.querySelectorAll('.quote-item').forEach(item => item.classList.remove('selected'));
            selectedElement.classList.add('selected');

            document.getElementById('quoteDisplay').innerText = selectedElement.innerText;
            document.getElementById('userNameDisplay').innerText = userInfo.name;
            document.getElementById('userContactDisplay').innerText = userInfo.contact ? `üìû ${userInfo.contact}` : '';
            document.getElementById('userAddressDisplay').innerText = userInfo.address ? `üìç ${userInfo.address}` : '';
            document.getElementById('userImagePreview').src = userInfo.photoDataUrl;

            document.getElementById('wishSection').style.display = 'block';
            document.getElementById('wishSection').scrollIntoView({ behavior: 'smooth' });
        }

        async function shareWish(event) {
            const captureElement = document.getElementById('captureArea');
            const shareButton = event.target;
            const originalText = shareButton.textContent;
            shareButton.textContent = uiText[currentLanguage].shareProcessing;
            shareButton.disabled = true;

            let canvas;
            try {
                canvas = await html2canvas(captureElement, { useCORS: true, logging: false, scale: 3 });
                const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));
                const filesArray = [new File([blob], 'business-wish-card.png', { type: 'image/png' })];
                
                // ‡§®‡§Ø‡§æ ‡§¨‡§¶‡§≤‡§æ‡§µ: ‡§∂‡•á‡§Ø‡§∞ ‡§°‡•á‡§ü‡§æ ‡§ï‡•ã ‡§¨‡•á‡§π‡§§‡§∞ ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ
                const shareData = {
                    files: filesArray,
                    title: "Business Wish Card",
                    text: `*${userInfo.name}*${uiText[currentLanguage].shareMessage}${uiText[currentLanguage].createYourOwnMessage}\n${window.location.href}`
                };

                if (navigator.canShare && navigator.canShare(shareData)) {
                    await navigator.share(shareData);
                } else {
                    throw new Error("Web Share API not supported.");
                }
            } catch (error) {
                if (error.name !== 'AbortError') { // AbortError ‡§§‡§¨ ‡§π‡•ã‡§§‡§æ ‡§π‡•à ‡§ú‡§¨ ‡§Ø‡•Ç‡•õ‡§∞ ‡§ñ‡•Å‡§¶ ‡§∂‡•á‡§Ø‡§∞ ‡§°‡§æ‡§Ø‡§≤‡•â‡§ó ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à
                    alert(uiText[currentLanguage].shareError);
                    if (canvas) { 
                        const link = document.createElement('a');
                        link.download = 'business-wish-card.png';
                        link.href = canvas.toDataURL();
                        link.click();
                    }
                }
            } finally {
                shareButton.textContent = originalText;
                shareButton.disabled = false;
            }
        }
        
        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            darkModeToggle.addEventListener('change', () => {
                const theme = darkModeToggle.checked ? 'dark' : 'light';
                localStorage.setItem('theme', theme);
                applyTheme(theme);
            });
            const savedTheme = localStorage.getItem('theme') || 'light';
            applyTheme(savedTheme);
            setLanguage(currentLanguage);
        });

        const backgroundImages = {
            morning: 'https://images.unsplash.com/photo-1470252649378-9c29740c9fa8?q=80&w=2070&auto=format&fit=crop',
            afternoon: 'https://images.unsplash.com/photo-1590523741831-ab7e8b8f9c7f?q=80&w=1974&auto=format&fit=crop',
            evening: 'https://images.unsplash.com/photo-1501418611786-e29f9921fe23?q=80&w=2070&auto=format&fit=crop',
            night: 'https://images.unsplash.com/photo-1507320423868-b63e9c62947a?q=80&w=2070&auto=format&fit=crop'
        };

    </script>
</body>
</html>